{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useState,useContext}from'react';import{Button,Alert}from'reactstrap';import{Link}from'react-router-dom';import{UserContext}from'../UserContext';import{Password,InputField}from'../components';import Facebook from\"../components/Facebook\";import Loader from\"../components/Loader\";import bg from'../images/login-bg.jpg';import'../styles/Login.css';function Login(props){var _useState=useState({showPassword:false,username:\"\",password:\"\",validUserName:false,validPassword:false,alert:false,alertText:\"\",alertColor:\"\",loading:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],set=_useState2[1];var _useContext=useContext(UserContext),updateUser=_useContext.updateUser;var handleInput=function handleInput(_ref){var target=_ref.target,valid=_ref.valid;var name=target.name,value=target.value;var formdata={};formdata[name]=value;formdata[name===\"username\"?\"validUserName\":\"validPassword\"]=valid;set(function(values){return _objectSpread({},values,{},formdata);});};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var username,password,validPassword,loading,response,status,data,token,payload,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:username=values.username,password=values.password,validPassword=values.validPassword,loading=values.loading;if(!(!username||!validPassword||loading)){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.prev=3;set(function(values){return _objectSpread({},values,{loading:true});});_context.next=7;return fetch(\"https://team-trion.herokuapp.com/login/\",{method:'POST',mode:'cors',cache:'no-cache',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})});case 7:response=_context.sent;status=response.status;_context.next=11;return response.json();case 11:data=_context.sent;if(status===201||status===200){token=data.token;payload={isLoggedIn:true,userData:{username:username,token:token}};updateUser(payload);localStorage[\"_authuser\"]=JSON.stringify(payload);props.history.push(\"/report\");}else{message=Array.isArray(data)?data[0]:data[Object.keys(data)[0]];set(function(values){return _objectSpread({},values,{loading:false,alert:true,alertColor:\"danger\",alertText:message||\"An Error Occured\"});});}_context.next=17;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](3);case 17:case\"end\":return _context.stop();}}},_callee,null,[[3,15]]);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();return React.createElement(\"div\",{className:\"page-container\"},React.createElement(\"div\",{className:\"page-group form-area\"},React.createElement(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();}},React.createElement(\"h5\",null,\"Welcome back to TritonFinApp!\"),React.createElement(Alert,{isOpen:values.alert,toggle:function toggle(){return set(function(v){return _objectSpread({},v,{alert:false});});},color:values.alertColor},values.alertText),React.createElement(InputField,{className:\"ctrl md\",type:\"text\",name:\"username\",id:\"user-name\",onKeyUp:handleInput,autoComplete:\"username\",label:\"User Name\"}),React.createElement(Password,{className:\"ctrl md\",name:\"password\",id:\"user-password\",onKeyUp:handleInput,autoComplete:\"current-password\"}),React.createElement(\"div\",{className:\"forget-pass\"},React.createElement(Button,{className:\"forget-password-btn\",color:\"link\",onClick:function onClick(){return props.history.push(\"/forgot-password\");}},\"Forgot Password ?\")),React.createElement(Button,{color:\"success\",size:\"lg\",block:true,onClick:handleSubmit,type:\"button\",disabled:values.loading?true:!values.username||!values.validPassword},\"Sign In\",values.loading&&React.createElement(Loader,{width:\"30px\"})),React.createElement(\"div\",null,React.createElement(Facebook,null)),React.createElement(\"div\",{className:\"text-center mt-3\"},React.createElement(\"p\",null,\"Don't have an account?\",React.createElement(Link,{className:\"text-signup\",to:\"/get-started\"},\" Sign Up\"))))),React.createElement(\"div\",{className:\"page-group form-image\"},React.createElement(\"div\",{className:\"background-holder\",style:{backgroundImage:\"url(\".concat(bg,\")\")}},\" \"),React.createElement(\"div\",{className:\"overlay\"}),React.createElement(\"div\",{className:\"desc-text\"},React.createElement(\"h4\",null,\" TristonFinApp gives best services to our customers. \"),React.createElement(\"p\",null,\"A financial tracker app that allows users to enter items they have purchased with money over a given period of time. The app is then able to display the total amount spent per time by the user  based on the time period selected.\"),React.createElement(Button,{className:\"inverted-white get-started\",outline:true,color:\"primary\",onClick:function onClick(){return props.history.push(\"/get-started\");}},\"Get Started\"))));}export default Login;","map":{"version":3,"sources":["C:\\laragon\\www\\hosting-triton\\src\\pages\\Login.js"],"names":["React","useState","useContext","Button","Alert","Link","UserContext","Password","InputField","Facebook","Loader","bg","Login","props","showPassword","username","password","validUserName","validPassword","alert","alertText","alertColor","loading","values","set","updateUser","handleInput","target","valid","name","value","formdata","handleSubmit","fetch","method","mode","cache","headers","body","JSON","stringify","response","status","json","data","token","payload","isLoggedIn","userData","localStorage","history","push","message","Array","isArray","Object","keys","e","preventDefault","v","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\n\r\nimport { Button, Alert } from 'reactstrap';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { UserContext } from '../UserContext';\r\nimport { Password, InputField } from '../components';\r\nimport Facebook from \"../components/Facebook\"; \r\nimport Loader from \"../components/Loader\";\r\nimport bg from '../images/login-bg.jpg';\r\nimport '../styles/Login.css';\r\n\r\n\r\n\r\nfunction Login(props) {\r\n\r\n    const [values, set] = useState({\r\n        showPassword:false,\r\n        username:\"\",\r\n        password:\"\",\r\n        validUserName:false,\r\n        validPassword:false,\r\n        alert:false,\r\n        alertText:\"\",\r\n        alertColor:\"\",\r\n        loading:false,\r\n    })\r\n\r\n    const { updateUser } = useContext(UserContext);\r\n\r\n    const handleInput = ({ target, valid })=>{\r\n        const { name, value } = target;\r\n        const formdata = {};\r\n        formdata[name] = value;\r\n        formdata[name === \"username\" ? \"validUserName\": \"validPassword\"] = valid;\r\n        set(values => ({ ...values,...formdata }));\r\n    }\r\n\r\n    const handleSubmit = async ()=>{\r\n        const { username, password, validPassword, loading } = values;\r\n\r\n        if(!username || !validPassword || loading) return;\r\n        try {\r\n            set(values => ({ ...values, loading:true }));\r\n            const response = await fetch(\"https://team-trion.herokuapp.com/login/\",{\r\n                method: 'POST', \r\n                mode: 'cors', \r\n                cache: 'no-cache',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                  username,\r\n                  password\r\n                })\r\n              });\r\n            let { status } = response;\r\n            const data = await response.json();\r\n\r\n            if(status === 201 || status === 200 ){\r\n                const { token } = data;\r\n                const payload = {\r\n                    isLoggedIn:true,\r\n                    userData:{\r\n                        username,\r\n                        token\r\n                    }\r\n                }\r\n                updateUser(payload);\r\n                localStorage[\"_authuser\"] = JSON.stringify(payload);\r\n                props.history.push(\"/report\");\r\n            }else{\r\n                let message = Array.isArray(data) \r\n                    ?\r\n                    data[0]\r\n                    :\r\n                    data[Object.keys(data)[0]]\r\n                set(values=>({\r\n                    ...values,\r\n                    loading:false,\r\n                    alert:true,\r\n                    alertColor:\"danger\",\r\n                    alertText: message || \"An Error Occured\"\r\n                }))\r\n            }\r\n            \r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"page-container\">\r\n            <div className=\"page-group form-area\">\r\n                <form onSubmit = {e => { e.preventDefault() }} >\r\n                    <h5>Welcome back to TritonFinApp!</h5>\r\n                    <Alert \r\n                        isOpen={ values.alert } \r\n                        toggle={ ()=> set(v=>({...v, alert:false})) }\r\n                        color = { values.alertColor }\r\n                    > \r\n                        { values.alertText }\r\n                    </Alert> \r\n                    <InputField\r\n                        className=\"ctrl md\" \r\n                        type=\"text\" \r\n                        name=\"username\" \r\n                        id=\"user-name\"\r\n                        onKeyUp = { handleInput }\r\n                        autoComplete = \"username\"\r\n                        label = \"User Name\"\r\n                    />\r\n                    <Password\r\n                        className=\"ctrl md\" \r\n                        name=\"password\" \r\n                        id=\"user-password\"\r\n                        onKeyUp = { handleInput }\r\n                        autoComplete = \"current-password\"\r\n                    />\r\n                    <div className=\"forget-pass\">\r\n                        <Button \r\n                            className=\"forget-password-btn\" \r\n                            color=\"link\"\r\n                            onClick = { ()=> props.history.push(\"/forgot-password\") }\r\n                        >\r\n                            Forgot Password ?\r\n                        </Button>\r\n                    </div>\r\n                    <Button \r\n                        color=\"success\" \r\n                        size=\"lg\" \r\n                        block\r\n                        onClick = { handleSubmit }\r\n                        type = \"button\"\r\n                        disabled = { values.loading ? true :  (!values.username || !values.validPassword) }\r\n                    > \r\n                        Sign In \r\n                        { values.loading && <Loader width=\"30px\" />}\r\n                    </Button>\r\n                    {/* facebook button */}\r\n                    <div>\r\n                    < Facebook/>\r\n                    </div>\r\n\r\n                    <div className=\"text-center mt-3\">\r\n                        <p>Don't have an account? \r\n                            <Link className=\"text-signup\" to=\"/get-started\"> Sign Up</Link>\r\n                        </p>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div className=\"page-group form-image\">\r\n                <div className=\"background-holder\" style={{backgroundImage: `url(${bg})` }}> </div>\r\n                <div className=\"overlay\"></div>\r\n                <div className=\"desc-text\">\r\n                    <h4> TristonFinApp gives best services to our customers. </h4>\r\n                    <p>\r\n                        A financial tracker app that allows users to enter items they have purchased with money over a given period of time. The app is then able \r\n                        to display the total amount spent per time by the user  based on the time period selected. \r\n                    </p>\r\n                    <Button \r\n                        className=\"inverted-white get-started\"\r\n                        outline \r\n                        color=\"primary\" \r\n                        onClick = { ()=> props.history.push(\"/get-started\") }\r\n                        >Get Started\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n"]},"metadata":{},"sourceType":"module"}