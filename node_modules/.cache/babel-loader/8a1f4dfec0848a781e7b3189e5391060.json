{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import Sidebar from\"./Report Components/Sidebar\";import{UserContext}from'../UserContext';import ReportDetail from'./Report Components/ReportDetail';import Dashboard from'./Report Components/Dashboard';import MenuIcon from'@material-ui/icons/Menu';import AddCircleIcon from'@material-ui/icons/AddCircle';import AddExpenseModal from'./Report Components/AddExpenseModal';import{getWithAuth}from\"../utils/APIRequest\";import{Button}from'reactstrap';import\"../styles/Report.css\";var Report=/*#__PURE__*/function(_Component){_inherits(Report,_Component);function Report(props){var _this;_classCallCheck(this,Report);_this=_possibleConstructorReturn(this,_getPrototypeOf(Report).call(this,props));_this.state={activeTab:\"dashboard\",menuClass:\"\",modalIsOpen:false,dashboardLoading:true,dashboard:{weekly:0,monthly:0,yearly:0},expenseList:{Year:{loading:false,data:[]},Month:{loading:false,data:[]},Week:{loading:false,data:[]}}};_this.handleTabClick=_this.handleTabClick.bind(_assertThisInitialized(_this));_this.closeMenu=_this.closeMenu.bind(_assertThisInitialized(_this));_this.showMenu=_this.showMenu.bind(_assertThisInitialized(_this));_this.openModal=_this.openModal.bind(_assertThisInitialized(_this));_this.fetchDashboardData=_this.fetchDashboardData.bind(_assertThisInitialized(_this));_this.refreshDasboard=_this.refreshDasboard.bind(_assertThisInitialized(_this));_this.logout=_this.logout.bind(_assertThisInitialized(_this));Report.contextType=UserContext;return _this;}_createClass(Report,[{key:\"handleTabClick\",value:function handleTabClick(activeTab){this.setState({activeTab:activeTab,menuClass:\"\"});}},{key:\"showMenu\",value:function showMenu(){this.setState({menuClass:\"mobile-show\"});}},{key:\"closeMenu\",value:function closeMenu(){this.setState({menuClass:\"\"});}},{key:\"openModal\",value:function openModal(modalIsOpen){this.setState({modalIsOpen:modalIsOpen});}},{key:\"fetchDashboardData\",value:function(){var _fetchDashboardData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,status,dashboard;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getWithAuth('/dashboard/');case 2:response=_context.sent;status=response.status;_context.next=6;return response.json();case 6:dashboard=_context.sent;if(status===200){this.openModal(false);this.setState({dashboard:dashboard,dashboardLoading:false});}case 8:case\"end\":return _context.stop();}}},_callee,this);}));function fetchDashboardData(){return _fetchDashboardData.apply(this,arguments);}return fetchDashboardData;}()},{key:\"fetchTableData\",value:function(){var _fetchTableData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(tab){var expenseList,response,status,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:expenseList=this.state.expenseList;expenseList[tab][\"loading\"]=true;this.setState({expenseList:expenseList});_context2.next=5;return getWithAuth(\"/\".concat(tab.toLowerCase(),\"ly/\"));case 5:response=_context2.sent;status=response.status;_context2.next=9;return response.json();case 9:data=_context2.sent;if(status===200){expenseList=this.state.expenseList;expenseList[tab][\"data\"]=Object.values(data);expenseList[tab][\"loading\"]=false;this.setState({expenseList:expenseList});}case 11:case\"end\":return _context2.stop();}}},_callee2,this);}));function fetchTableData(_x){return _fetchTableData.apply(this,arguments);}return fetchTableData;}()},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchDashboardData();this.fetchTableData('Year');this.fetchTableData('Month');this.fetchTableData('Week');}},{key:\"logout\",value:function logout(){var updateUser=this.context.updateUser;delete localStorage._authuser;updateUser({isLoggedIn:false,userData:{}});}},{key:\"refreshDasboard\",value:function refreshDasboard(){this.fetchDashboardData();this.fetchTableData('Year');this.fetchTableData('Month');this.fetchTableData('Week');}},{key:\"render\",value:function render(){var _this2=this;var activeTab=this.state.activeTab;var user=this.context.user;return React.createElement(\"div\",{className:\"report_container\"},React.createElement(Sidebar,Object.assign({},this.state,{onCloseMenu:this.closeMenu,onTabClick:this.handleTabClick,logout:this.logout})),React.createElement(\"main\",{className:\"report_content\"},React.createElement(\"nav\",{className:\"mobile_nav\"},React.createElement(MenuIcon,{onClick:this.showMenu,width:\"1.5em\",height:\"1.5em\",fill:\"#fff\"}),React.createElement(\"h3\",null,\"Dashboard\")),React.createElement(\"div\",{className:\"header_nav\"},React.createElement(\"h4\",null,\"Welcome \",user.userData.username,\",\"),React.createElement(Button,{color:\"primary\",className:\"add-expense\",onClick:function onClick(e){return _this2.openModal(true);}},React.createElement(AddCircleIcon,null),\" New Expense\")),React.createElement(\"div\",{className:\"view-content\"},activeTab===\"dashboard\"?React.createElement(Dashboard,this.state):React.createElement(ReportDetail,this.state)),React.createElement(AddExpenseModal,{open:this.openModal,isOpen:this.state.modalIsOpen,refreshDasboard:this.refreshDasboard})));}}]);return Report;}(Component);export default Report;","map":{"version":3,"sources":["C:\\laragon\\www\\hosting-triton\\src\\pages\\Report.js"],"names":["React","Component","Sidebar","UserContext","ReportDetail","Dashboard","MenuIcon","AddCircleIcon","AddExpenseModal","getWithAuth","Button","Report","props","state","activeTab","menuClass","modalIsOpen","dashboardLoading","dashboard","weekly","monthly","yearly","expenseList","Year","loading","data","Month","Week","handleTabClick","bind","closeMenu","showMenu","openModal","fetchDashboardData","refreshDasboard","logout","contextType","setState","response","status","json","tab","toLowerCase","Object","values","fetchTableData","updateUser","context","localStorage","_authuser","isLoggedIn","userData","user","username","e"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Sidebar from \"./Report Components/Sidebar\";\r\nimport { UserContext } from '../UserContext';\r\nimport ReportDetail from './Report Components/ReportDetail';\r\nimport Dashboard from './Report Components/Dashboard';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport AddExpenseModal from './Report Components/AddExpenseModal';\r\nimport { getWithAuth } from \"../utils/APIRequest\";\r\nimport { Button } from 'reactstrap';\r\nimport \"../styles/Report.css\";\r\n\r\nclass Report extends Component {\r\n\r\n    constructor(props){\r\n      super(props)\r\n      this.state = {\r\n        activeTab : \"dashboard\",\r\n        menuClass : \"\",\r\n        modalIsOpen : false,\r\n        dashboardLoading:true,\r\n        dashboard : {\r\n          weekly: 0,\r\n          monthly: 0,\r\n          yearly: 0\r\n        },\r\n        expenseList:{\r\n          Year:{loading:false, data:[]},\r\n          Month:{loading:false, data:[]},\r\n          Week:{loading:false, data:[]}\r\n        },\r\n\r\n      }\r\n      this.handleTabClick = this.handleTabClick.bind(this);\r\n      this.closeMenu = this.closeMenu.bind(this);\r\n      this.showMenu = this.showMenu.bind(this);\r\n      this.openModal = this.openModal.bind(this);\r\n      this.fetchDashboardData = this.fetchDashboardData.bind(this);\r\n      this.refreshDasboard = this.refreshDasboard.bind(this)\r\n      this.logout = this.logout.bind(this);\r\n      Report.contextType = UserContext;\r\n    }\r\n\r\n    \r\n    handleTabClick(activeTab){\r\n      this.setState({ activeTab, menuClass:\"\" });\r\n    }\r\n\r\n    showMenu(){\r\n      this.setState({ menuClass:\"mobile-show\" })\r\n    }\r\n\r\n    closeMenu(){\r\n      this.setState({ menuClass:\"\" })\r\n    }\r\n\r\n    openModal(modalIsOpen){\r\n      this.setState({ modalIsOpen:modalIsOpen })\r\n    }\r\n\r\n    async fetchDashboardData(){\r\n      let response = await getWithAuth('/dashboard/');\r\n      const { status } = response;\r\n      const dashboard = await response.json();\r\n\r\n      if(status === 200 ){\r\n        this.openModal(false);\r\n        this.setState({ dashboard, dashboardLoading:false });\r\n      }\r\n    }\r\n\r\n    async fetchTableData(tab){\r\n\r\n      let { expenseList } = this.state;\r\n\r\n      expenseList[tab][\"loading\"] = true;\r\n      this.setState({ expenseList });\r\n\r\n      const response = await getWithAuth(`/${tab.toLowerCase()}ly/`);\r\n      const { status } = response;\r\n      const data = await response.json();\r\n\r\n      if(status === 200 ){\r\n        ({ expenseList } = this.state);\r\n        expenseList[tab][\"data\"] = Object.values(data);\r\n        expenseList[tab][\"loading\"] = false;\r\n        this.setState({ expenseList });\r\n      }\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n      this.fetchDashboardData();\r\n      this.fetchTableData('Year');\r\n      this.fetchTableData('Month');\r\n      this.fetchTableData('Week');\r\n    }\r\n\r\n    logout(){\r\n      var {updateUser} = this.context;\r\n      delete localStorage._authuser;\r\n      updateUser({isLoggedIn:false, userData:{}});\r\n    }\r\n\r\n    refreshDasboard(){\r\n      this.fetchDashboardData();\r\n      this.fetchTableData('Year');\r\n      this.fetchTableData('Month');\r\n      this.fetchTableData('Week');\r\n    }\r\n\r\n    render() {\r\n        const { activeTab } = this.state;\r\n        const { user } = this.context;\r\n\r\n        return (\r\n            <div className=\"report_container\">\r\n                <Sidebar \r\n                  { ...this.state }\r\n                  onCloseMenu = { this.closeMenu }\r\n                  onTabClick = { this.handleTabClick } \r\n                  logout = { this.logout } \r\n                />\r\n                <main className=\"report_content\">\r\n                  <nav className=\"mobile_nav\">\r\n                    <MenuIcon \r\n                      onClick = { this.showMenu }\r\n                      width=\"1.5em\" \r\n                      height=\"1.5em\"  \r\n                      fill=\"#fff\" \r\n                    />\r\n                    <h3>Dashboard</h3>\r\n                  </nav>\r\n                  <div className=\"header_nav\">\r\n                    <h4>Welcome { user.userData.username },</h4>\r\n                    <Button \r\n                      color=\"primary\" \r\n                      className=\"add-expense\"\r\n                      onClick = { e=>this.openModal(true) }\r\n                    >\r\n                      <AddCircleIcon /> New Expense\r\n                    </Button>\r\n                  </div>\r\n                  <div className=\"view-content\" >\r\n                    {\r\n                      activeTab === \"dashboard\" \r\n                      ? <Dashboard { ...this.state } />\r\n                      : <ReportDetail { ...this.state } />\r\n                    }\r\n                  </div>\r\n                  <AddExpenseModal \r\n                    open = { this.openModal } \r\n                    isOpen = { this.state.modalIsOpen } \r\n                    refreshDasboard = { this.refreshDasboard }\r\n                  />\r\n                </main>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Report;"]},"metadata":{},"sourceType":"module"}