{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:\\\\laragon\\\\www\\\\hosting-triton\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useState}from'react';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,FormGroup,Label,Input,Alert}from'reactstrap';import Loader from'../../components/Loader';import{PostWithAuth}from\"../../utils/APIRequest\";function AddExpenseModal(props){var isOpen=props.isOpen,open=props.open,refreshDasboard=props.refreshDasboard;var initialState={purchase_date:new Date().toISOString().substr(0,10),amount:0,item:'',description:'',loading:false,alert:false,alertColor:\"danger\",alertText:\"An Error Occured\"};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),form=_useState2[0],set=_useState2[1];var handleInput=function handleInput(_ref){var target=_ref.target;set(function(form){return _objectSpread({},form,_defineProperty({},target.name,target.value));});};var handleDateChange=function handleDateChange(_ref2){var target=_ref2.target;set(function(form){return _objectSpread({},form,{purchase_date:target.value});});};var handleClose=function handleClose(){set(initialState);open(false);};var validateForm=function validateForm(){var amount=form.amount,item=form.item,description=form.description,purchase_date=form.purchase_date;return!amount||!item||!description||!purchase_date;};var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var amount,item,description,purchase_date,response,status,data,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:amount=form.amount,item=form.item,description=form.description,purchase_date=form.purchase_date;if(!validateForm()){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.prev=3;set(function(form){return _objectSpread({},form,{loading:true});});_context.next=7;return PostWithAuth(\"/items/\",{amount:amount,item:item,description:description,purchase_date:purchase_date});case 7:response=_context.sent;status=response.status;_context.next=11;return response.json();case 11:data=_context.sent;if(!(status===201||status===200)){_context.next=18;break;}_context.next=15;return refreshDasboard();case 15:set(initialState);_context.next=20;break;case 18:message=Array.isArray(data)?data[0]:data[Object.keys(data)[0]];set(function(form){return _objectSpread({},form,{loading:false,alert:true,alertColor:\"danger\",alertText:message||\"An Error Occured\"});});case 20:_context.next=24;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](3);case 24:case\"end\":return _context.stop();}}},_callee,null,[[3,22]]);}));return function handleSubmit(){return _ref3.apply(this,arguments);};}();return React.createElement(\"div\",null,React.createElement(Modal,{isOpen:isOpen,className:props.className},React.createElement(ModalHeader,null,\"Add Expense\"),React.createElement(ModalBody,null,React.createElement(Alert,{isOpen:form.alert,toggle:function toggle(){return set(function(v){return _objectSpread({},v,{alert:false});});},color:form.alertColor},form.alertText),React.createElement(\"form\",null,React.createElement(FormGroup,null,React.createElement(Label,{for:\"purchase_date\"},\"Date (MM/DD/YYYY)\"),React.createElement(Input,{className:\"ctrl md\",type:\"date\",name:\"purchase_date\",autoComplete:\"date\",defaultValue:form.purchase_date,onChange:handleDateChange,id:\"purchase_date\"})),React.createElement(FormGroup,null,React.createElement(Label,{for:\"item\"},\"Item\"),React.createElement(Input,{className:\"ctrl md\",type:\"text\",name:\"item\",onKeyUp:handleInput,autoComplete:\"expense\",id:\"item\"})),React.createElement(FormGroup,null,React.createElement(Label,{for:\"amount\"},\"Amount\"),React.createElement(Input,{className:\"ctrl md\",type:\"number\",name:\"amount\",onKeyUp:handleInput,autoComplete:\"amount\",id:\"amount\"})),React.createElement(FormGroup,null,React.createElement(Label,{for:\"description\"},\"Description\"),React.createElement(Input,{id:\"description\",className:\"ctrl md\",type:\"text\",name:\"description\",onKeyUp:handleInput,autoComplete:\"description\"})))),React.createElement(ModalFooter,null,React.createElement(Button,{color:\"success\",disabled:validateForm(),onClick:handleSubmit},\"Save\",form.loading&&React.createElement(Loader,{width:\"30px\"})),React.createElement(Button,{color:\"secondary\",onClick:handleClose},\"Cancel\"))));}export default AddExpenseModal;","map":{"version":3,"sources":["C:\\laragon\\www\\hosting-triton\\src\\pages\\Report Components\\AddExpenseModal.js"],"names":["React","useState","Button","Modal","ModalHeader","ModalBody","ModalFooter","FormGroup","Label","Input","Alert","Loader","PostWithAuth","AddExpenseModal","props","isOpen","open","refreshDasboard","initialState","purchase_date","Date","toISOString","substr","amount","item","description","loading","alert","alertColor","alertText","form","set","handleInput","target","name","value","handleDateChange","handleClose","validateForm","handleSubmit","response","status","json","data","message","Array","isArray","Object","keys","className","v"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup,Label, Input, Alert } from 'reactstrap';\r\nimport Loader from '../../components/Loader';\r\nimport { PostWithAuth } from \"../../utils/APIRequest\";\r\n\r\nfunction AddExpenseModal(props) {\r\n\r\n    const { isOpen, open, refreshDasboard } = props;\r\n  \r\n    const initialState = {\r\n        purchase_date : new Date().toISOString().substr(0,10),\r\n        amount:0,\r\n        item:'',\r\n        description:'',\r\n        loading:false,\r\n        alert:false,\r\n        alertColor:\"danger\",\r\n        alertText: \"An Error Occured\"\r\n    }\r\n\r\n    const [form,  set] = useState(initialState);\r\n\r\n    const handleInput = ({target})=>{\r\n        set(form=>({...form, [target.name]:target.value }))\r\n    }\r\n\r\n    const handleDateChange = ({ target })=>{\r\n        set(form=>({...form, purchase_date:target.value }))\r\n    }\r\n\r\n    const handleClose = ()=>{\r\n        set(initialState);\r\n        open(false);\r\n    }\r\n\r\n    const validateForm = ()=>{\r\n        const { amount, item, description, purchase_date } = form;\r\n        return !amount || !item || !description || !purchase_date;\r\n    }\r\n\r\n    const handleSubmit = async ()=>{\r\n        const { amount, item, description, purchase_date } = form;\r\n        if(validateForm()) return;\r\n\r\n        try {\r\n            set(form => ({ ...form, loading:true }));\r\n            const response = await PostWithAuth(\"/items/\", { amount, item, description, purchase_date });\r\n            const { status } = response;\r\n            const data = await response.json();\r\n\r\n            if(status === 201 || status === 200 ){\r\n                await refreshDasboard();\r\n                set(initialState);\r\n            }else{\r\n                let message = Array.isArray(data) ? data[0] : data[Object.keys(data)[0]];\r\n                set(form=>({\r\n                    ...form,\r\n                    loading:false,\r\n                    alert:true,\r\n                    alertColor:\"danger\",\r\n                    alertText: message || \"An Error Occured\"\r\n                }))\r\n            }\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <Modal isOpen={isOpen} className={props.className}>\r\n            <ModalHeader>Add Expense</ModalHeader>\r\n            <ModalBody>\r\n                <Alert \r\n                    isOpen={ form.alert } \r\n                    toggle={ ()=> set(v=>({...v, alert:false})) }\r\n                    color = { form.alertColor }\r\n                > \r\n                    { form.alertText }\r\n                </Alert> \r\n                <form>\r\n                    <FormGroup>\r\n                        <Label for=\"purchase_date\">Date (MM/DD/YYYY)</Label>\r\n                        <Input \r\n                            className=\"ctrl md\" \r\n                            type=\"date\" \r\n                            name=\"purchase_date\" \r\n                            autoComplete = \"date\"\r\n                            defaultValue = { form.purchase_date }\r\n                            onChange = { handleDateChange }\r\n                            id = \"purchase_date\"\r\n                        />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"item\">Item</Label>\r\n                        <Input \r\n                            className=\"ctrl md\" \r\n                            type=\"text\" \r\n                            name=\"item\" \r\n                            onKeyUp = { handleInput }\r\n                            autoComplete = \"expense\"\r\n                            id = \"item\"\r\n                        />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"amount\">Amount</Label>\r\n                        <Input \r\n                            className=\"ctrl md\" \r\n                            type=\"number\" \r\n                            name=\"amount\" \r\n                            onKeyUp = { handleInput }\r\n                            autoComplete = \"amount\"\r\n                            id = \"amount\"\r\n                        />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label for=\"description\">Description</Label>\r\n                        <Input \r\n                            id = \"description\"\r\n                            className=\"ctrl md\" \r\n                            type=\"text\" \r\n                            name=\"description\" \r\n                            onKeyUp = { handleInput }\r\n                            autoComplete = \"description\"\r\n                        />\r\n                    </FormGroup>\r\n                </form>\r\n            </ModalBody>\r\n            <ModalFooter>\r\n                <Button color=\"success\"\r\n                    disabled = { validateForm() }\r\n                    onClick = { handleSubmit }\r\n                >Save\r\n                { form.loading && <Loader width=\"30px\" /> }\r\n                </Button>\r\n                <Button \r\n                    color=\"secondary\"\r\n                    onClick = { handleClose }\r\n                >Cancel</Button>\r\n            </ModalFooter>\r\n        </Modal>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default AddExpenseModal\r\n"]},"metadata":{},"sourceType":"module"}